{{- if eq .chezmoi.os "darwin" }}
set-option -g default-shell /opt/homebrew/bin/bash
{{- else }}
set-option -g default-shell /bin/bash
{{- end }}

# Enable mouse control (clickable windows, panes, resizable panes)
set -g mouse on
set -g default-terminal 'screen-25jcolor'
set-option -sa terminal-overrides ",xterm*:Tc"

# name a pane after split
bind-key c command-prompt -p "window name:" "new-window; rename-window '%%'"


# split panes using | and -
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# toggle synchronize-panes
bind C-s setw synchronize-panes
setw -g window-status-current-format '#{?pane_synchronized,#[bg=red],}#I:#W'
setw -g window-status-format         '#{?pane_synchronized,#[bg=red],}#I:#W'


# reload config
unbind r
bind r source-file ~/.config/tmux/tmux.conf

# vim keys
setw -g mode-keys vi
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

# Enable vim yank in tmux
set -g focus-events on
set -sg escape-time 10

# Pane menu
bind-key  -T root  MouseDown3Pane      display-menu -T "#[align=centre]#{pane_index} (#{pane_id})" -t = -x M -y M \
  ""                                                                                                                                     \
  "Toggle SyncPanes"                            S   "setw synchronize-panes"                                                   \
  "Swap Up"                                                       u   "swap-pane -U"                                                     \
  "Swap Down"                                                     d   "swap-pane -D"                                                     \
  "#{?pane_marked_set,,-}Swap Marked"                             s   swap-pane                                                          \
  ""                                                                                                                                     \
  Kill                                                            X   kill-pane                                                          \
  Respawn                                                         R   "respawn-pane -k"                                                  \
  "#{?window_zoomed_flag,Unzoom,Zoom}"                            z   "resize-pane -Z"                                                   \

# list of plugins
set -g @tpm_plugins ' \
  tumx-plugins/tpm \
  christoomey/vim-tmux-navigator \
'

##initialize tmux plugin manager... keep this here.
run '~/.config/tmux/plugins/tpm/tpm'
display-message "Loading ~/.tmux.conf"